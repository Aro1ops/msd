document.addEventListener("DOMContentLoaded", () => {
    // Сохранение энергии, если есть сохранённое значение, иначе задаём 3000
    let energy = JSON.parse(localStorage.getItem("energy")) || 3000; 
    let maxEnergy = JSON.parse(localStorage.getItem("maxEnergy")) || 3000;

    // Обновление полоски энергии
    const updateEnergyBar = () => {
        // Если энергия больше максимального значения, устанавливаем значение равным maxEnergy
        if (energy > maxEnergy) {
            energy = maxEnergy;
        }

        // Процент заполненности полоски энергии
        const percentage = (energy / maxEnergy) * 100;
        energyFill.style.width = `${percentage}%`;
        energyLabel.textContent = `${energy} / ${maxEnergy}`;
    };

    // Другие части кода ...

    loadGame();
    updateEnergyBar();

    setInterval(() => {
        if (energy < maxEnergy) {
            energy += 1;
            updateEnergyBar();
        }
    }, Math.max(regenTime, 1000)); // Интервал регенерации
});